/*
 * toaberlin.css
 * (c) 2013 maciej(at)canadel(dot)ee, guillaume(at)toaberlin(dot)com
 *
 *      built using LESS
 *      http://leafo.net/lessphp
 *
 */

// # global reset
@import 'reset.less';

// # less variables
@color-text: #000;
@color-text-gray: #646464;
@color-text-gray-dark: #5A5A5A;
//#454543
@color-text-hero-submenu: #494949;
@color-bg: #fff;
@color-border: #DEDEDE;
@color-border-dark: #ccc;
@color-red: #DC142C;
@color-red-light: #FC354C;

@color-bg-gray: #FBFBF9;
@color-bg-gray-dark: #F4F4F3;
@color-bg-hero: #EFEDEC;
@color-bg-red: #FFF5F2;

@color-retro-bg: #A19F73;
@color-retro-text: #ffffff;

@font-minion: 'minion-pro';
@font-proxima: 'proxima-nova';

@images-layout: '../images/layout';
@images-content: '../images/content';

@width-layout: 960px;
@height-header: 151px;

// # global definitions, classes and less mixins
.fleft {	float: left		}
.fright {	float: right		}
.tleft {	text-align: left	}
.tcenter { 	text-align: center	}
.tright {	text-align: right	}
.titalic {	font-style: italic	}
.tupper {	text-transform: uppercase	}
.tnouper {	text-transform: none	}
.mauto {	margin: 0 auto		}

.separator {margin-top: 20px;}
.negmargin-top {   
    margin-top: -19px;
    z-index: 10 !important;
}
.relative {	position: relative	}
.absolute() {				// L8R: finetune those methods :)
	position: absolute;
}
.absolute(@top, @left: 0) {
	.absolute;
	top: @top + px;
	left: @left + px;
}
.topleft(@top, @left) {
	top: @top;
	left: @left;
}
.topright(@top, @right) {
	top: @top;
	right: @right;
}
.bottomleft(@bottom, @left) {
	bottom: @bottom;
	left: @left;
}
.bottomright(@bottom, @right) {
	bottom: @bottom;
	right: @right;
}

.disblock() {
	display: block;
}
.disblock(@height) {
	.disblock;
	height: @height;
}
.disblock(@width, @height) {
	.disblock;
	width: @width;
	height: @height;
}

.bglay(@image) {
	background: no-repeat url(@{images-layout}/@{image});
}
.nobg {
	background: none !important;
}

.ffamily(@font) {
	font-family: @font, sans-serif;
}
.ffamily(@size, @font) {
	.ffamily(@font);
	font-size: @size;
}
.ffamily(@size, @font, @weight) {
	.ffamily(@size, @font);
	font-weight: @weight;
}

.content-box-inner {padding: 25px;}
.uborder(@color) {	// "U" shape border
	border: none;
	border-left: 1px solid @color;
	border-right: 1px solid @color;
	border-bottom: 1px solid @color;
}
.crevborder(@colorr) {	// "C-reversed" shape border
	border: none;
	border-top: 1px solid @colorr;
	border-bottom: 1px solid @colorr;
	border-right: 1px solid @colorr;
}
.formborder {
	border: 1px solid @color-border;

	color: @color-text-gray-dark;
	background-color: @color-bg-gray;
}

.c3transition(@duration) {
	-o-transition: @duration;
	-ms-transition: @duration;
	-moz-transition: @duration;
	-webkit-transition: @duration;
	transition: @duration;
}
.c3rotate(@amount) {
	-webkit-transform:rotate(@amount);
	-moz-transform:rotate(@amount);
	-ms-transform:rotate(@amount);
	transform:rotate(@amount);
}
.c3appearance(@value) {
	-webkit-appearance: @value;
	-moz-appearance: @value;
	appearance: @value;
}

// # common (global) block elements
body {
	.tcenter;
	font: 17px 'Minion Pro', sans-serif;
	background-color: @color-bg;
}
a {
	.c3transition(800ms);	// ** applies to all possible content
}
a:hover {
    .c3transition(150ms);
}


#main {
	.tleft;
	.mauto;

	margin-top: 4px;
        width: @width-layout;
}
	#header {
		height: @height-header;

		#logo {
			.disblock(250px, @height-header);
			.bglay('logo_top.gif');
			.mauto;
		}

	        #loginbox {
			.fright;
	        }
	}

	#content {
    

		// # hero unit block
		#hero {
			@height-local-media: 518px;	// TODO: consider if it's not subsite-dependant! if so, maybe pass PHP vars before compiling less?
			@height-local-menu: 33px;

			.disblock(@height-local-media + @height-local-menu);

			margin-top: 18px;

			#hero_media {
				height: @height-local-media;
			}

			#hero_submenu {
				.uborder(@color-border);
				.ffamily(16px, @font-proxima);

				@padding-local-top: 7px;

				height: @height-local-menu - @padding-local-top;
				padding-top: @padding-local-top;

				background-color: @color-bg-hero;

				h3, ul { .fleft }

				h3 {
					.tupper;

					margin: 0 8px 0 12px;
					padding-right: 16px;

					font-weight: bold;

					background: no-repeat url(@{images-layout}/arrow.png) right 4px;
				}

				ul {

					li {
						.fleft;
						margin: 0 11px;

						a {
							color: @color-text-hero-submenu;
							text-decoration: none;

							&:hover, &.selected {

								color: @color-red;
							}
						}
					}
				}
			}
		} // end #hero
    
        .location_slider {
            .relative;
        
            .slider_content{
                white-space: nowrap;
                overflow: hidden;
            }
        
            a.slider_nav {
                background: #ffffff;
                border: 1px solid @color-border;
                display: block;
                width: 40px;
                height: 40px;
                .absolute;
            
                &:hover {border: 1px solid @color-text;}
            
                &.slider_previous {
                    .topleft(63px, -6px);
                    background: @color-bg no-repeat url(@{images-layout}/arrow_prev.gif) center center;
                    &:hover {background: @color-text no-repeat url(@{images-layout}/arrow_prev_white.gif) center center;}
                }
                &.slider_next {
                    .topright(63px, -6px);
                    background: @color-bg no-repeat url(@{images-layout}/arrow_next.gif) center center;
                    &:hover {background: @color-text no-repeat url(@{images-layout}/arrow_next_white.gif) center center;}
                }
            
            }
        }
        
        .table {
            display: table;
            border-collapse: separate;
            border-spacing: 15px 5px;
            margin-left: -15px;
            margin-bottom: 60px;
            table-layout: fixed;
        
            .three-columns {
                display: table-cell;
                border: 1px solid @color-border;
                width: 308px;
                .relative;
                
                .content-box-inner {padding: 15px;}
                
                img {
                    margin: -1px;
                    width: 310px;
                }
            
                h3 {
                    .absolute;
                    .topleft(160px, 10px);
                    padding: 0.2em 0.6em;
                    background: #fff;
                }
        
                p {font-size: 16px;}
                ul {
                    font-size: 15px;
                
                    li {
                        padding: 0.3em 0.6em 0.2em 0.6em;
                        background: @color-bg-hero;
                        margin: 1px;
                        .fleft;
                    }
                }
            }
        }
    
        #edition-2013 {
            background: @color-retro-bg;
            color: @color-retro-text;
            .negmargin-top;
            .content-box-inner;
        
            p { color: @color-retro-text;}
        
            #about-2013 {
            
                #theme-description {
                    width: 520px;
                    margin-right: 70px;
                    .fleft;
                }
                
                #sidebar-expect {
                    width: 240px;
                    background: @color-retro-text;
                    color: @color-retro-bg;
                    .fleft;
                    .tcenter;
                    .content-box-inner;
                }
            }
        
            #locations-2013 {
                .separator;
            
                .illustration-kater {
                    .relative;
                
                    #kater-address {
                        background: @color-retro-text;
                        border: 2px solid @color-retro-bg;
                        .absolute;
                        .bottomright(20px, 20px);
                        .content-box-inner;
                    
                        h3, p {
                            color: @color-retro-bg;
                            .tcenter;
                        }
                    }
                    
                    h2 {
                        padding: 0.2em 0.4em;
                        background: @color-retro-text;
                        color: @color-retro-bg;
                        .absolute;
                        .bottomleft(30px, 20px);
                    }
                }
            
                #kater-description {
                    .content-box-inner;
                    background: @color-retro-text;
                    margin-top: -8px;
                    
                    p {color: @color-retro-bg;}
                }
            }
        }
    
    
        .press-publications {
            border: 1px solid @color-border;
    
            .press-covering {
                height: 360px;
                overflow-y: scroll;
                width: 560px;
                .fleft;
                .content-box-inner;
            }
            .sidebar-contact {
                background: @color-bg-gray;
                width: 290px;
                height: 360px;
                .fright;
                .content-box-inner;
                .tcenter;
            }
        }
    
        .story_timeline {
            .timeline {
                border-left: 6px solid @color-red;
                margin-left: 40px;
                width: 640px;
                padding: 1px 0;
                
                .milestone {
                    margin: 1em 0 4em 0;
                    position: relative;
                
                    .milestone-pointer {
                        position: absolute;
                        top: 50%;
                        left: -13px;
                        background: @color-red;
                        height: 12px;
                        width: 12px;
                        border-radius: 50%;
                        border: 5px solid #fff;
                        margin-top: -24px;
                    }
                    .milestone-line {
                        background: @color-red;
                        height: 2px;
                        position: absolute;
                        top: 50%;
                        left: 0;
                        width: 90px;
                        margin-top: -14px;
                    }
                    .milestone-content {
                        margin-left: 90px;
                        background: #ffffff;
                        border: 1px solid @color-border;
                    
                        p, h3 {
                            margin:0 0 0.5em 0;
                        }
                        img {
                            margin: -1px;
                            width: 550px;
                            height: auto;
                        }
                        .date {
                            background: @color-bg-gray;
                            font-size: smaller;
                            font-style: italic;
                            padding: 8px 15px;
                            line-height: 1em;
                            .tright;
                        }
                    }
                }
            
            }
        }

		// ! common for known blocks
		.listing, .textual { margin-top: 36px }

		// > listing block
		.listing {
			.tcenter;

			// the fancy widget
			h1, h2, .listing_widget { .tleft }
			.listing_widget {
				.relative;

				@height-local-widget: 30px;
				height: @height-local-widget;

				background: @color-bg-gray no-repeat url(@{images-layout}/timeline.gif) top center;

				a {
					.disblock(29px, @height-local-widget - 1px);
					border: 1px solid @color-border-dark;
                    &:hover {border: 1px solid @color-text;}
				}

				.listing_widget_next {
					.fright;

					background: @color-bg no-repeat url(@{images-layout}/arrow_next.gif) center center;
                    &:hover {background: @color-text no-repeat url(@{images-layout}/arrow_next_white.gif) center center;}
				}
				.listing_widget_prev {
					.fleft;

					background: @color-bg no-repeat url(@{images-layout}/arrow_prev.gif) center center;
                    &:hover {background: @color-text no-repeat url(@{images-layout}/arrow_prev_white.gif) center center;}
				}

				// TODO: redo it in the manner pixprapromo is built
				.measure {
					@width-local-measure: 153px;
					@left-local-start: 51px;
					.disblock(@width-local-measure, @height-local-widget);

					background-color: rgba(255, 0, 0, .5);

					.absolute;

					&.pos1 {
						left: @left-local-start;
					}
					&.pos2 {
						left: @left-local-start + @width-local-measure;
					}
					&.pos3 {
						left: @left-local-start + 2 * @width-local-measure;
					}
				}


				// slight modifications for the widget on top
				&.upper {
					.negmargin-top

					a {
						height: @height-local-widget;
						.uborder(@color-border-dark);
					}
				}
			}

			// the entire list
			ul.listing_list {
				.disblock;
				@padding-local-leftright: 5px;

				margin-top: 39px;
				padding: 0 @padding-local-leftright;

				li {
					@height-local-li: 126px;
					@width-local-photo: 174px;

					margin-bottom: 18px;

					&, & a.big_link {

						.disblock(@height-local-li);
					}

					// hover effects
					span.photo, span.data span.title { .c3transition(.5s) }
					a.big_link:hover {

						span.photo, span.data span.title { color: @color-red }
					}


					span.photo, span.data { .fleft }
					span.photo {
						.disblock(@width-local-photo, @height-local-li);
						.relative;
						.ffamily(60px, @font-proxima, 600);

						color: @color-bg-gray;
						background-repeat: no-repeat;

						span {
							.absolute;
							.bottomright(0, 2px);

							margin-bottom: -12px;	// ** EXPERIMENTAL, test cross-browser
						}
					}
					span.data {

						// we're removing 1 from width and 2 from height for the border size
						.disblock(@width-layout - 2 * @padding-local-leftright - @width-local-photo - 1, @height-local-li - 2);
						.crevborder(@color-border-dark);
						.tleft;
						.relative;

						background-color: @color-bg-gray;

						span {
							.absolute;
							@position-local-leftright: 14px;
							@position-local-topbottom: 14px;

							line-height: 1em;
							color: @color-text;

							&.title, &.desc { width: 475px }	// ** hard-limiting widths here
							&.title, &.time { .ffamily(15px, @font-proxima, bold) }
							&.time, &.address { font-size: 16px }
							&.title {
								.tupper;
								.topleft(@position-local-topbottom, @position-local-leftright);
							}
							&.hosted {
								.titalic;
								.topleft(33px, @position-local-leftright);

								color: @color-text-gray;

								font-size: 14px;

								b {
									color: @color-red;
									text-decoration: underline;
									cursor: pointer;
								}
							}
							&.desc {
								.topleft(51px, @position-local-leftright);

								color: @color-text-gray-dark;

								line-height: 1.25em;
								letter-spacing: -0.75px;		// ** kind of experimental
								word-spacing: 1px;
							}
							&.address, &.time { .tright }
							&.address {
								.topright(@position-local-topbottom, @position-local-leftright);

								line-height: 1.2em;
							}
							&.time {
								.bottomright(@position-local-topbottom, @position-local-leftright);

								color: @color-red;
							}
						}
					}
				}
			}
		} // & end listing block

		// > textual block
		.textual {
            
            hr {
                border: none;
                border-bottom: 1px solid @color-border-dark;
                margin: 90px 30%;
            }

			h3 {
				.ffamily(16px, @font-proxima, bold);
				margin: 0.2em 0 .5em 0;
			}
			p {
				margin-bottom: 0.8em;
				color: #494949;
				line-height: 1.36em;

 				text-align: justify;


				&.lead {
					color: #000;
					font-size: 28px;
                    .tleft;
				}
			}
		} // & end textual block

		// > forms block
		.forms {

			h2 {
				margin-bottom: 20px;
			}
			
			h3 {
				.ffamily(16px, @font-proxima, bold);
				.tupper;

				margin-bottom: 6px;
			}

			form {
				@width-local-form: 542px;
				@padding-leftright-fields: 10px;
				@padding-topbottom-fields: 6px;

				width: @width-local-form;

				// TODO: play with selects:
				// http://cssdeck.com/labs/styling-select-box-with-css3
				// http://lea.verou.me/2011/03/custom-select-drop-downs-with-css3/

				// some form field defaults
				select, textarea, input[type=text] {			// ** CSS3 selectors sadly :/
					.ffamily(18px, @font-minion);
					.formborder;

					padding: @padding-topbottom-fields @padding-leftright-fields;
                    -webkit-border-radius: 0;
                    border-radius: 0;
				}

				// text errors
				.error_list {

					color: @color-red;
					font-style: italic;
                    padding: 0.28em 0;
				}

				// sections
				.section_block {
					margin-bottom: 97px;

					&.last {
						margin-bottom: 36px;
					}
				}

				.section {
					margin-bottom: 8px;

					// fancy dropdowns
					span {
						display: inline-block;
						height: 100%;
					}
					&.dropdown, .dropdown {

						// TODO: play with "web/css/formselectfix.css" updating with proper paddings to ensure Safari compat

						.relative;

						select {
							.c3appearance(none);
							outline: none;
							display: inline-block;

							cursor: pointer;
						}

						&:before, &:after {
							.absolute;

							pointer-events: none;

							content: '';
							background-color: @color-text;
							background-repeat: no-repeat;
						}

						&.dropdown_small {	// ** used for time selects

							select {
								padding: 2px 40px 2px 8px;
                                margin: 0 8px;
                                .relative;
							}

							&:before, &:after {

								.disblock(34px, 100%);
								background-image: url(@{images-layout}/select_bg_small.png);
							}

							&:before {
								.topright(0, 8);
							}
							&:after {
								.absolute(0, 42);	// ** NOTICE: this can be very tricky on some browsers
							}
						}
						&.dropdown_big {	// ** used for category select

							&:before {
								.disblock(41px, 100%);
								.topright(0, 2px);

								background-image: url(@{images-layout}/select_bg_big.png);
							}
						}
					}

					// global sections
					&.long {

						select, textarea, input[type=text] {
							.disblock;
							width: @width-local-form - 2px;		// ** 2 px for left/right borders
						}

						textarea, input[type=text] {	// for some reason input is stubborn

							width:  @width-local-form - 4px - (2 * @padding-leftright-fields);
						}
					}

					// individual sections
					&.description {
						textarea { height: 320px - 4px - (2 * @padding-topbottom-fields); }
					}
					&.upload {
						.formborder;
						.tcenter;

						width: @width-local-form - 4px;

						margin-top: 44px;
						padding: 10px 0;

						p {
							margin-bottom: 5px;

							font-size: 13px;
							line-height: 1.1em;
						}
					}
					&.color {

						input {
							width: 210px - 2 * @padding-leftright-fields - 2px;
							// TODO: consider proper left padding for the background image, when adding the picker
						}
					}
					&.city {
						.fleft input {
							width: 100px - 2 * @padding-leftright-fields - 2px;
						}
						.fright input {
							width: 430px - 2 * @padding-leftright-fields - 2px;
						}
					}
					&.price {

						.fleft input {
							width: 154px - 2 * @padding-leftright-fields - 2px;

							// ** many declarations not to kill the original background color which can differ here
							background-image: url(@{images-layout}/euro.gif);
							background-repeat: no-repeat;
							background-position: 130px 13px;

							// TODO: try to text-align right and add right padding for the euro sign
						}
						.fright {

							p { font-size: 17px; }
							input {
								.tright;
								width: 68px - 2 * @padding-leftright-fields - 2px;
							}

						}
					}

					// errors
					&.error, .error {

						// TODO: find what form->renderGlobalErrors() renders and add here too

						// fields
						select, textarea, input[type=text] {

							border-color: @color-red;
						}
					}
				}
			}
			
		} // & end forms block

		// > content typography defaults
		h1 {
			.ffamily(46px, @font-minion);
			.tupper;
			position: relative;
			z-index: -10;

			span {
				.tnouper;
				.titalic;
				font-size: 18px;
				font-weight: normal;
				padding-top: 3px;
				display: inline-block;
				vertical-align: middle;
			}

			&:after {
				content: "";
				width: 100%;
				height: 18px;
				background: #fff;
				border-top: 1px solid @color-border-dark;
				position: absolute;
				bottom: 0;
				display: inline-block;
				left: 0;
			}
		}

		h2 {
			.ffamily(29px, @font-minion);
			.tupper;
		}

		p {

			&.notice {
				.titalic;
			}

			a {
				color: @color-red;
				text-decoration: underline;

				&:hover {
					text-decoration: none;
                    color: @color-red-light;
				}
			}
		}
        small {font-size: smaller;}
        big {font-size: larger;}

		a.button_red, input.button_red {

			.ffamily(21px, @font-proxima, bold);
			.tupper;

			padding: 6px 14px;

			color: @color-bg;
			background-color: @color-red;
			border: none;

			cursor: pointer;
            
            &:hover {
                background: @color-text;
            }
		}
		a.button_black {

			.ffamily(17px, @font-minion);
			.tupper;

			padding: 9px 15px;
            border: 1px solid #000;
            display: inline-block;

			color: @color-bg;
			background: @color-text;

			cursor: pointer;

			font-weight: normal;
			text-decoration: none;
            
            &:hover {
                color: #000;
                background: #fff;
                border: 1px solid @color-border-dark;
            }

			&.button_black_small {

				padding: 7px 19px;
				font-size: 10px;
			}
		}

	} // & end #content

#footer {
	.ffamily(16px, @font-proxima, bold);

	margin-top: 130px;	// FIXME: this will be killed by JS automation anyway

	background-color: @color-bg-gray;

	#footer_menu {
		.tupper;
		.tright;

		padding: 16px 65px 12px 0;

		border-top: 1px solid @color-border;
		border-bottom: 1px solid @color-border;

		ul {
			.fright;
			@padding-local-top: 6px;
			@padding-local-bottom: 8px;

			padding: @padding-local-top 0 @padding-local-bottom 0;

			li {
				.fleft;
				margin-left: 3px;	// FIXME: finetune; though it kind of cannot be done properly :(

				a {
					padding: @padding-local-top 12px @padding-local-bottom 12px;

					text-decoration: none;
					color: @color-text;

					// states in proper sequence; highlighted at bottom so it overrides anything else
					&.selected, &:hover {
						color: @color-red;
					}

					&.highlighted {
						color: @color-bg;
						background-color: @color-red;
                        &:hover {
                            background: @color-text;
                        }
					}
				}
			}
		}
	}

	// FIXME: temporary stuff
	h1 {
		padding: 60px 0;
		.tupper;
		font-size: 70px;
	}
}

// # content screens
// they apply to anything below #content div and can override or add certain unique looks
div.screen_host {	// host event (selection)

	.textual {

		h4 {

			.ffamily(64px, @font-proxima, 900);
			.tupper;
			line-height: .36em;

			margin-top: 100px;
		}
	}
}
div.screen_host_form {	// "edit" and "new" screens for the event

	#hero {
		margin-bottom: 36px;
	}
}
