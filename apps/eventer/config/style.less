/*
 * toaberlin.css
 * (c) 2013 maciej(at)canadel(dot)ee
 *
 *      built using LESS
 *      http://leafo.net/lessphp
 *
 */

// # global reset
@import 'reset.less';

// # less variables
@color-text: #000;
@color-text-gray: #646464;
@color-text-gray-dark: #5A5A5A;
@color-text-hero-submenu: #494949;
@color-bg: #fff;
@color-border: #DEDEDE;
@color-border-dark: #ccc;
@color-red: #DC142C;
@color-red-light: #EA7280;

@color-bg-gray: #FBFBF9;
@color-bg-gray-dark: #F4F4F3;
@color-bg-hero: #EFEDEC;

@color-retro-bg: #A19F73;
@color-retro-text: #ffffff;

@font-minion: 'minion-pro';
@font-proxima: 'proxima-nova';

@images-layout: '../images/layout';
@images-content: '../images/content';

@width-layout: 960px;
@height-header: 151px;

// # global definitions, classes and less mixins
.fleft {	float: left		}
.fright {	float: right		}
.tleft {	text-align: left	}
.tcenter { 	text-align: center	}
.tright {	text-align: right	}
.titalic {	font-style: italic	}
.tupper {	text-transform: uppercase	}
.tnouper {	text-transform: none	}
.mauto {	margin: 0 auto		}

.negmargin-top {   
    margin-top: -19px;
    z-index: 10 !important;
}
.relative {	position: relative	}
.absolute() {				// L8R: finetune those methods :)
	position: absolute;
}
.absolute(@top, @left: 0) {
	.absolute;
	top: @top + px;
	left: @left + px;
}
.topleft(@top, @left) {
	top: @top;
	left: @left;
}
.topright(@top, @right) {
	top: @top;
	right: @right;
}
.bottomleft(@bottom, @left) {
	bottom: @bottom;
	left: @left;
}
.bottomright(@bottom, @right) {
	bottom: @bottom;
	right: @right;
}

.disblock() {
	display: block;
}
.disblock(@height) {
	.disblock;
	height: @height;
}
.disblock(@width, @height) {
	.disblock;
	width: @width;
	height: @height;
}

.bglay(@image) {
	background: no-repeat url(@{images-layout}/@{image});
}
.nobg {
	background: none !important;
}

.ffamily(@font) {
	font-family: @font, sans-serif;
}
.ffamily(@size, @font) {
	.ffamily(@font);
	font-size: @size;
}
.ffamily(@size, @font, @weight) {
	.ffamily(@size, @font);
	font-weight: @weight;
}

.content-box-inner {padding: 25px;}
.uborder(@color) {	// "U" shape border
	border: none;
	border-left: 1px solid @color;
	border-right: 1px solid @color;
	border-bottom: 1px solid @color;
}
.crevborder(@colorr) {	// "C-reversed" shape border
	border: none;
	border-top: 1px solid @colorr;
	border-bottom: 1px solid @colorr;
	border-right: 1px solid @colorr;
}

.c3transition(@duration) {
	-o-transition: @duration;
	-ms-transition: @duration;
	-moz-transition: @duration;
	-webkit-transition: @duration;
	transition: @duration;
}

// # common (global) block elements
body {
	.tcenter;
	font: 17px 'Minion Pro', sans-serif;
	background-color: @color-bg;
}
a {
	.c3transition(.5s);	// ** applies to all possible content
}


#main {
	.tleft;
	.mauto;

	margin-top: 4px;
        width: @width-layout;
}
	#header {
		height: @height-header;

		#logo {
			.disblock(250px, @height-header);
			.bglay('logo_top.gif');
			.mauto;
		}

	        #loginbox {
			.fright;
	        }
	}

	#content {
    

		// # hero unit block
		#hero {
			@height-local-media: 518px;	// TODO: consider if it's not subsite-dependant! if so, maybe pass PHP vars before compiling less?
			@height-local-menu: 33px;

			.disblock(@height-local-media + @height-local-menu);

			margin-top: 18px;

			#hero_media {
				height: @height-local-media;
			}

			#hero_submenu {
				.uborder(@color-border);
				.ffamily(16px, @font-proxima);

				@padding-local-top: 7px;

				height: @height-local-menu - @padding-local-top;
				padding-top: @padding-local-top;

				background-color: @color-bg-hero;

				h3, ul { .fleft }

				h3 {
					.tupper;

					margin: 0 8px 0 12px;
					padding-right: 16px;

					font-weight: bold;

					background: no-repeat url(@{images-layout}/arrow.png) right 4px;
				}

				ul {

					li {
						.fleft;
						margin: 0 11px;

						a {
							color: @color-text-hero-submenu;
							text-decoration: none;

							&:hover, &.selected {

								color: @color-red;
                        }
						}
					}
				}
			}
		}

        
        
       .three-columns {
            padding: 15px;
            border: 1px solid @color-border;
            .fleft;
            .tcenter;
            margin: 0 7px;
            width: 258px;
        
            &.first {margin-left: 0;}
            &.last {margin-right: 0;}
            
            p {font-size: 16px;}
            ul {
                font-size: 16px;
                .tleft;
            }
        }


    
        #edition-2013 {
            background: @color-retro-bg;
            color: @color-retro-text;
            .negmargin-top;
            .content-box-inner;
        
            p { color: @color-retro-text;}
        
            #about-2013 {
                #theme-description {
                    width: 540px;
                    margin-right: 2.4em;
                    .fleft;
                }
                
                #sidebar-expect {
                    width: 279px;
                    background: @color-retro-text;
                    color: @color-retro-bg;
                    .fleft;
                    .tcenter;
                    .content-box-inner;
                }
            }
        
            .illustration-kater {
                line-height: 0;
                .relative;
                
                #kater-address {
                    .absolute;
                    .content-box-inner;
                    .tcenter;
                    bottom: 20px;
                    right: 20px;
                    background: @color-retro-text;
                    border: 2px solid @color-retro-bg;
                    
                    p { color: @color-retro-bg; }
                    h3 {
                        color: @color-retro-bg;
                        .tupper;
                    }
                }
            
                h2 {
                    .absolute;
                    bottom: 30px;
                    left: 10px;
                    background: @color-retro-text;
                    color: @color-retro-bg;
                    padding: 0.6em 0.4em;
                }
            }
            #kater-description {
                    background: @color-retro-text;
                    .content-box-inner;
            
                    p{ color: @color-retro-bg; }
            }
        }
    
    
        .press-publications {
            border: 1px solid @color-border;
    
            .press-covering {
                height: 360px;
                overflow-y: scroll;
                width: 560px;
                .fleft;
                .content-box-inner;
            }
            .sidebar-contact {
                background: @color-bg-gray;
                width: 290px;
                height: 360px;
                .fright;
                .content-box-inner;
                .tcenter;
            }
        }
    
        .story_timeline {
            .timeline {
                border-left: 6px solid @color-red;
                margin-left: 40px;
                width: 640px;
                padding: 1px 0;
                
                .milestone {
                    margin: 1em 0 4em 0;
                    position: relative;
                
                    .milestone-pointer {
                        position: absolute;
                        top: 50%;
                        left: -13px;
                        background: @color-red;
                        height: 12px;
                        width: 12px;
                        border-radius: 50%;
                        border: 5px solid #fff;
                        margin-top: -24px;
                    }
                    .milestone-line {
                        background: @color-red;
                        height: 2px;
                        position: absolute;
                        top: 50%;
                        left: 0;
                        width: 90px;
                        margin-top: -14px;
                    }
                    .milestone-content {
                        margin-left: 90px;
                        background: #ffffff;
                        border: 1px solid @color-border;
                    
                        p, h3 {
                            margin:0 0 0.5em 0;
                        }
                        img {
                            margin: -1px;
                            width: 550px;
                            height: auto;
                        }
                        .date {
                            background: @color-bg-gray;
                            font-size: smaller;
                            font-style: italic;
                            padding: 8px 15px;
                            line-height: 1em;
                            .tright;
                        }
                    }
                }
            
            }
        }

		// ! common for known blocks
		.listing, .textual { margin-top: 36px }

		// > listing block
		.listing {
			.tcenter;

			// the fancy widget
			h1, .listing_widget { .tleft }
			.listing_widget {
				.relative;

				@height-local-widget: 30px;
				height: @height-local-widget;

				background: @color-bg-gray no-repeat url(@{images-layout}/timeline.gif) top center;

				a {
					.disblock(29px, @height-local-widget - 1px);
					border: 1px solid @color-border-dark;
				}

				.listing_widget_next {
					.fright;

					background: @color-bg no-repeat url(@{images-layout}/arrow_next.gif) center center;
				}
				.listing_widget_prev {
					.fleft;

					background: @color-bg no-repeat url(@{images-layout}/arrow_prev.gif) center center;
				}

				// TODO: redo it in the manner pixprapromo is built
				.measure {
					@width-local-measure: 153px;
					@left-local-start: 51px;
					.disblock(@width-local-measure, @height-local-widget);

					background-color: rgba(255, 0, 0, .5);

					.absolute;

					&.pos1 {
						left: @left-local-start;
					}
					&.pos2 {
						left: @left-local-start + @width-local-measure;
					}
					&.pos3 {
						left: @left-local-start + 2 * @width-local-measure;
					}
				}


				// slight modifications for the widget on top
				&.upper {
                    .negmargin-top

					a {
						height: @height-local-widget;
						.uborder(@color-border-dark);
					}
				}
			}

			// the entire list
			ul.listing_list {
				.disblock;
				@padding-local-leftright: 5px;

				margin-top: 39px;
				padding: 0 @padding-local-leftright;

				li {
					@height-local-li: 126px;
					@width-local-photo: 174px;

					margin-bottom: 18px;

					&, & a.big_link {

						.disblock(@height-local-li);
					}

					// hover effects
					span.photo, span.data span.title { .c3transition(.5s) }
					a.big_link:hover {

						span.photo, span.data span.title { color: @color-red }
					}


					span.photo, span.data { .fleft }
					span.photo {
						.disblock(@width-local-photo, @height-local-li);
						.relative;
						.ffamily(60px, @font-proxima, bold);	// TODO: use Proxima-Nova semi bold when possible

						color: @color-bg-gray;
						background-repeat: no-repeat;

						span {
							.absolute;
							.bottomright(0, 2px);

							margin-bottom: -12px;	// ** EXPERIMENTAL, test cross-browser
						}
					}
					span.data {

						// we're removing 1 from width and 2 from height for the border size
						.disblock(@width-layout - 2 * @padding-local-leftright - @width-local-photo - 1, @height-local-li - 2);
						.crevborder(@color-border-dark);
						.tleft;
						.relative;

						background-color: @color-bg-gray;

						span {
							.absolute;
							@position-local-leftright: 14px;
							@position-local-topbottom: 14px;

							line-height: 1em;
							color: @color-text;

							&.title, &.desc { width: 475px }	// ** hard-limiting widths here
							&.title, &.time { .ffamily(15px, @font-proxima, bold) }
							&.time, &.address { font-size: 16px }
							&.title {
								.tupper;
								.topleft(@position-local-topbottom, @position-local-leftright);
							}
							&.hosted {
								.titalic;
								.topleft(33px, @position-local-leftright);

								color: @color-text-gray;

								font-size: 14px;

								b {
									color: @color-red;
									text-decoration: underline;
									cursor: pointer;
								}
							}
							&.desc {
								.topleft(51px, @position-local-leftright);

								color: @color-text-gray-dark;

								line-height: 1.25em;
								letter-spacing: -0.75px;		// ** kind of experimental
								word-spacing: 1px;
							}
							&.address, &.time { .tright }
							&.address {
								.topright(@position-local-topbottom, @position-local-leftright);

								line-height: 1.2em;
							}
							&.time {
								.bottomright(@position-local-topbottom, @position-local-leftright);

								color: @color-red;
							}
						}
					}
				}
			}
		}

		// > textual block
		.textual {

			h3 {
				.ffamily(16px, @font-proxima);
				font-weight: bold;
				margin: 0.2em 0 .5em 0;
			}
			p {
				margin-bottom: 0.8em;
                color: #494949;
                line-height: 1.36em;
			
                &.lead {
                    color: #000;
                    font-size: 28px;
                }
            }
		}

		// > content typography defaults
		h1 {
			.ffamily(46px, @font-minion);
			.tupper;
            position: relative;
            z-index: -10;

			span {
				.tnouper;
				.titalic;
				font-size: 18px;
				font-weight: normal;
                padding-top: 3px;
                display: inline-block;
                vertical-align: middle;
			}
		}
        h1:after {
            content: "";
            width: 100%;
            height: 18px;
            background: #fff;
            border-top: 1px solid @color-border-dark;
            position: absolute;
            bottom: 0;
            display: inline-block;
            left: 0;
        }

		h2 {
			.ffamily(29px, @font-minion);
			.tupper;

			// TODO: margins
		}

		h4 {
		}

		p {

			&.notice {
				.titalic;
			}

			a {
				color: @color-red;
				text-decoration: underline;

				&:hover {
					text-decoration: none;
				}
			}
		}
    
        strong {font-weight: 600;}
        big {font-size: larger;}
        small {font-size: smaller;}

		a.button_red, input.button_red {

			.ffamily(28px, @font-proxima, bold);
			.tupper;

			padding: 6px 14px;

			color: @color-bg;
			background-color: @color-red;
			border: none;

			cursor: pointer;
		}
		a.button_black {
			// TODO
		}
	}

#footer {
	.ffamily(16px, @font-proxima, bold);

	margin-top: 130px;	// FIXME: this will be killed by JS automation anyway

	background-color: @color-bg-gray;

	#footer_menu {
		.tupper;
		.tright;

		padding: 16px 65px 12px 0;

		border-top: 1px solid @color-border;
		border-bottom: 1px solid @color-border;

		ul {
			.fright;
			@padding-local-top: 6px;
			@padding-local-bottom: 8px;

			padding: @padding-local-top 0 @padding-local-bottom 0;

			li {
				.fleft;
				margin-left: 3px;	// FIXME: finetune; though it kind of cannot be done properly :(

				a {
					padding: @padding-local-top 12px @padding-local-bottom 12px;

					text-decoration: none;
					color: @color-text;

					// states in proper sequence; highlighted at bottom so it overrides anything else
					&.selected, &:hover {
						color: @color-red;
					}

					&.highlighted {
						color: @color-bg;
						background-color: @color-red;
					}
				}
			}
		}
	}

	// FIXME: temporary stuff
	h1 {
		padding: 60px 0;
		.tupper;
		font-size: 70px;
	}
}

// content screens
// they apply to anything below #content div and can override or add certain looks
div.screen_home {	// home

	#hero {
		// some modifications
	}
}
div.screen_host {	// host event (selection)

}
div.screen_host_new {	// host new event (form)

}
